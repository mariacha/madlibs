<?php
/**
 * @file
 * Drupal needs this blank file.
 */

/**
 * Implements hook_menu().
 *
 * Adds a page that displays some text.
 */
function madlibs_menu() {
   $items['madlib'] = array(
      'title' => "Madlib viewer",
      'page callback' => 'madlib_viewer',
      'access callback' => TRUE,
    );
    return $items;
}

/**
 * Page callback to show a madlib form and results.
 */
function madlib_viewer() {

  drupal_add_js(drupal_get_path('module', 'madlibs') .'/js/madlibs_maker.js', 'file');

  $text = theme('madlib');

  return $text;
}

/**
 * Implements hook_block_info().
 *
 * Adds a block to show a silly picture when the madlib is completed.
 */
function madlibs_block_info() {
  $blocks['madlib_picture'] = array(
    'info' => t('Madlib silly picture'),
    'cache' => DRUPAL_CACHE_GLOBAL,
  );
  return $blocks;
}

/**
 * Implements hook_block_view().
 *
 * Tells Drupal how to display the block declared above.
 */
function madlibs_block_view($delta = ''){
  $block = array();

  if ($delta == 'madlib_picture') {
    $block['content'] = array(
      '#theme' => 'image',
      '#path' => drupal_get_path('module', 'madlibs') .'/images/original-seal.jpg',
      '#height' => 168,
      '#width' => 164,
      '#attributes' => array('id' => 'funny-picture'),
    );
  }

  return $block;
}

/**
 * Implememnts hook_theme($existing, $type, $theme, $path)
 *
 * Declares a template for our madlib page.
 */
function madlibs_theme($existing, $type, $theme, $path) {
  $themes = array (
    'madlib' => array(
      'path' => drupal_get_path('module', 'madlibs') .'/templates',
      'template' => 'madlib',
    ),
  );

  return $themes;
}
